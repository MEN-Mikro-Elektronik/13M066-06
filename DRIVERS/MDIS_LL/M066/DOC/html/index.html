<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>MEN - M66 MDIS Driver - Main Page</title>
<meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<meta name="Language" content="en, english">
<meta name="Copyright" content="All material copyright MEN Mikro Elektronik GmbH">
<link href="men_stylesheet.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class="left_to_right" style="padding-top: 6px; background-color: #F0F0F0; height: 110px; border-bottom: 2px solid #D1D1D2;">
	<!-- Titel -->
	<img src="menlogo.gif" alt="MEN" style="float: left; height: 103px; width: 155px; margin: 0px;"></a>
	<h1 style="margin: 0px; padding-top: 35px; padding-bottom: 0px;">M66 MDIS Driver &nbsp; </h1>
	<h3>Main Page</h3>
</div>

<div class="left_to_right">
<!-- Hauptteil -->
	<div class="main">
<!-- Generated by Doxygen 1.3.2 -->
<div class="qindex"><a class="qindexHL" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="annotated.html">Data&nbsp;Structures</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="functions.html">Data&nbsp;Fields</a> | <a class="qindex" href="globals.html">Globals</a> | <a class="qindex" href="pages.html">Related&nbsp;Pages</a> | <a class="qindex" href="examples.html">Examples</a></div>
<h1>M66 MDIS Driver Documentation</h1>
<p>
This is the documentation of the MDIS low-level driver for the M66 module.<p>
The M-Module M66 is an I/0 card with 32 binary inputs/outputs. Each channel can be used as input or output independent of the other channels.<p>
<br>
 <h2><a name="Variants"></a>
Variants</h2>
The M66 is an A08/D08 M-Module. It can be operated on all M-Module carrier boards. In order to support different CPU/carrier board combinations and to achieve maximum performance, the M66 driver can be built in some variants at compilation time:<p>
<div class="fragment"><pre>    Driver              Variant Description
    --------            --------------------------------
    Standard            A08 address mode, non-swapped
    _sw                 A08 address mode, swapped
</pre></div><p>
Here are some combinations of MEN CPU and carrier boards together with the required variants:<p>
<div class="fragment"><pre>    CPU                    Carrier Board          Driver Variant
    ----------------       -------------          --------------
    MEN A15 (MPC VME)      A203N (VME64)           Standard
    MEN A15 (MPC VME)      A015B                   _sw
    MEN A15 (MPC VME)      A201  (VME64)           Standard
    MEN F14 (Pentium CPCI) F205 (CPCI Carrier)     Standard
</pre></div><p>
<br>
 <h2><a name="FuncDesc"></a>
Functional Description</h2>
<br>
 <h3><a name="reading"></a>
Reading and Writing Data</h3>
The driver supports setting and clearing of each channel I/O by writing or reading at the current channel number. The channel number can be set with M66_SetStat or checked with M66_GetStat codes.<p>
<br>
 <h2><a name="interrupts"></a>
Interrupts</h2>
The driver supports interrupts from the M-Module configurable at each channel.<p>
<br>
 <h2><a name="signals"></a>
Signals</h2>
The driver supports 32 binary signals. <br>
<p>
<br>
 <h2><a name="id_prom"></a>
ID PROM</h2>
The M-Module's ID PROM can be checked for validity before the device is initialized. You can set the ID_CHECK option in the device descriptor.<p>
<br>
 <h2><a name="api_functions"></a>
Supported API Functions</h2>
<table border="0" cellspacing="3" cellpadding="3">
<tr>
<td><b>API function</b> </td><td><b>Functionality</b> </td><td><b>Corresponding low level function</b><p>
</td></tr>
<tr>
<td>M_open()</td><td>Open device</td><td><a class="el" href="m66__drv_8c.html#a36">M66_Init()</a><p>
</td></tr>
<tr>
<td>M_close() </td><td>Close device  </td><td><a class="el" href="m66__drv_8c.html#a37">M66_Exit()</a>) </td></tr>
<tr>
<td>M_read() </td><td>Read from device  </td><td><a class="el" href="m66__drv_8c.html#a38">M66_Read()</a> </td></tr>
<tr>
<td>M_write() </td><td>Write to device  </td><td><a class="el" href="m66__drv_8c.html#a39">M66_Write()</a> </td></tr>
<tr>
<td>M_setstat() </td><td>Set device parameter  </td><td><a class="el" href="m66__drv_8c.html#a40">M66_SetStat()</a> </td></tr>
<tr>
<td>M_getstat() </td><td>Get device parameter  </td><td><a class="el" href="m66__drv_8c.html#a41">M66_GetStat()</a> </td></tr>
<tr>
<td>M_getblock() </td><td>Block read from device  </td><td><a class="el" href="m66__drv_8c.html#a42">M66_BlockRead()</a> </td></tr>
<tr>
<td>M_setblock() </td><td>Block write from device  </td><td><a class="el" href="m66__drv_8c.html#a43">M66_BlockWrite()</a> </td></tr>
<tr>
<td>M_errstringTs() </td><td>Generate error message  </td><td>- </td></tr>
</table>
<p>
<br>
 <h2><a name="descriptor_entries"></a>
Descriptor Entries</h2>
The low-level driver initialization routine decodes the following entries ("keys") in addition to the general descriptor keys:<p>
<table border="0" cellspacing="3" cellpadding="3">
<tr>
<td><b>Descriptor entry</b> </td><td><b>Description</b> </td><td><b>Values</b>  </td></tr>
<tr>
<td>ID_CHECK </td><td>ID_CHECK = U_INT32 0 </td><td>0..1, default: 1  </td></tr>
<tr>
<td>RD_BUF  </td></tr>
<tr>
<td>RD_BUF/MODE </td><td>MODE = U_INT32 0 </td><td>0..3, default: 0  </td></tr>
<tr>
<td>RD_BUF/SIZE </td><td>SIZE = U_INT32 512 </td><td>0..n*32, default: 512  </td></tr>
<tr>
<td>RD_BUF/TIMEOUT </td><td>TIMEOUT = U_INT32 1000 </td><td>1..n in milli sec., default: 1000  </td></tr>
<tr>
<td>RD_BUF/HIGHWATER </td><td>HIGHWATER = U_INT32 512 </td><td>0..RDBUF/SIZE in byte, default: 512  </td></tr>
<tr>
<td>CHANNEL_%d </td><td>CHANNEL_%d  </td><td>0..31  </td></tr>
<tr>
<td>CHANNEL_%d/IRQ_ENABLE </td><td>IRQ_ENABLE = U_INT32 0 </td><td>0..3, default: 0 <p>
</td></tr>
</table>
<h3><a name="m66_min"></a>
Minimum descriptor</h3>
m66_min.dsc Demonstrates the minimum set of options necessary for using the driver.<h3><a name="m66_max"></a>
Maximum descriptor</h3>
m66_max.dsc Shows all possible configuration options for this driver.<h3><a name="m66_sw_min"></a>
Minimum descriptor for swapped version</h3>
m66_sw_min.dsc Demonstrates the minimum set of options necessary for using the driver at boards that need the swapped driver version.<h3><a name="m66_sw_max"></a>
Maximum descriptor for swapped version</h3>
m66_sw_max.dsc Shows all possible configuration options for this driver at boards that need the swapped driver version.<p>
<br>
 <h2><a name="programs"></a>
Overview of provided programs</h2>
<h3><a name="m66_simp"></a>
Simple example for using the driver</h3>
<a class="el" href="m66__simp_8c.html">m66_simp.c</a> (see example section)<h3><a name="m66_demo"></a>
Simple example for using the driver</h3>
<a class="el" href="m66__demo_8c.html">m66_demo.c</a> (see example section) Demo application for the M66 M-Module with demo adapter ======================================================= This simple application:<ul>
<li>open the M66 device</li><li>do 100x<ul>
<li>set channel 0..6 to output one number (0..9) on the 7-segment display of the demo adapter</li><li>toggle channel 7 to blink the point segment</li><li>read back the values from channel 0..6</li><li>rotate segments</li><li>give out the next number (0..9) and so on</li></ul>
</li><li>close the M66 device Note: To abort the programm press CTRL+C </li></ul>

	</div>
</div>

<div class="footer">
<!-- Footer -->
	<p class="footer">
	Generated for M66 MDIS Driver using <a href="http://www.doxygen.org">doxygen</a>.<br>
	Copyright &copy; 2019 <a href="http://www.men.de">MEN Mikro Elektronik GmbH</a>. All Rights Reserved.
	</p>
</div>

</body>
</html>

